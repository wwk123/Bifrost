# ğŸ”— å¤šé’±åŒ…è¿æ¥ç³»ç»Ÿ

## ğŸ“‹ æ¦‚è¿°

åŸºäºæ‚¨æä¾›çš„UIè®¾è®¡,å®ç°äº†æ”¯æŒ **Polkadot** å’Œ **EVM** åŒç”Ÿæ€çš„å¤šé’±åŒ…è¿æ¥ç³»ç»Ÿã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. åŒç”Ÿæ€æ”¯æŒ

#### Polkadot ç”Ÿæ€é’±åŒ…
- âœ… **Talisman** - Polkadot & Ethereum å¤šé“¾é’±åŒ…
- âœ… **Polkadot.js** - Polkadot å®˜æ–¹æµè§ˆå™¨æ‰©å±•
- âœ… **SubWallet** - Polkadot ç”Ÿæ€å…¨èƒ½é’±åŒ…

#### EVM ç”Ÿæ€é’±åŒ…
- âœ… **MetaMask** - æœ€å—æ¬¢è¿çš„ä»¥å¤ªåŠé’±åŒ…
- âœ… **WalletConnect v2** - ç§»åŠ¨ç«¯é’±åŒ…è¿æ¥
- âœ… **OKX Wallet** - OKX äº¤æ˜“æ‰€å®˜æ–¹é’±åŒ…
- âœ… **Gate Wallet** - Gate.io äº¤æ˜“æ‰€å®˜æ–¹é’±åŒ…
- âœ… **Enkrypt** - å¤šé“¾ Web3 é’±åŒ…

### 2. æ™ºèƒ½æ£€æµ‹

```typescript
// è‡ªåŠ¨æ£€æµ‹é’±åŒ…æ˜¯å¦å·²å®‰è£…
const checkWalletInstalled = (walletId: string): boolean => {
  switch (walletId) {
    case 'metamask':
      return !!(window as any).ethereum?.isMetaMask;
    case 'talisman':
      return !!(window as any).talismanEth;
    case 'polkadot-js':
      return !!(window as any).injectedWeb3?.['polkadot-js'];
    // ...æ›´å¤šé’±åŒ…æ£€æµ‹
  }
};
```

### 3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### å·²å®‰è£…é’±åŒ…
- æ˜¾ç¤º"å·²å®‰è£…"æ ‡è®° âœ…
- ç‚¹å‡»ç›´æ¥è¿æ¥
- å³ç®­å¤´å›¾æ ‡ â†’

#### æœªå®‰è£…é’±åŒ…
- æ˜¾ç¤ºä¸‹è½½æŒ‰é’®å›¾æ ‡ â¬‡ï¸
- ç‚¹å‡»æŸ¥çœ‹é’±åŒ…è¯¦æƒ…
- æä¾›ä¸‹è½½é“¾æ¥

### 4. é’±åŒ…è¯¦æƒ…é¡µ

æ¯ä¸ªæœªå®‰è£…çš„é’±åŒ…éƒ½æœ‰è¯¦æƒ…é¡µ:
- ğŸ“± é’±åŒ…å›¾æ ‡
- ğŸ“ åŠŸèƒ½ç‰¹æ€§ä»‹ç»
- ğŸ”— å®˜æ–¹ä¸‹è½½é“¾æ¥
- â„¹ï¸ ä½¿ç”¨è¯´æ˜

---

## ğŸ¨ UI è®¾è®¡

### å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      é“¾æ¥é’±åŒ…         [X]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ Polkadot ]  [ EVM ]      â”‚  â† æ ‡ç­¾åˆ‡æ¢
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  âœ‹ Talisman         â¬‡ï¸     â”‚
â”‚  ğŸŸ£ Polkadot.js      â¬‡ï¸     â”‚
â”‚  ğŸ’ SubWallet        â¬‡ï¸     â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â„¹ï¸ Bifrost-polkadot...      â”‚  â† æç¤ºä¿¡æ¯
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¢œè‰²æ–¹æ¡ˆ

| å…ƒç´  | é¢œè‰² | ç”¨é€” |
|------|------|------|
| èƒŒæ™¯ | `bg-white` | ä¸»èƒŒæ™¯ |
| æ ‡ç­¾æ¿€æ´» | `bg-white shadow-sm` | é€‰ä¸­æ ‡ç­¾ |
| æ ‡ç­¾æœªæ¿€æ´» | `text-gray-600` | æœªé€‰ä¸­æ ‡ç­¾ |
| é’±åŒ…å¡ç‰‡ | `bg-gray-50 hover:bg-gray-100` | æ‚¬åœæ•ˆæœ |
| å·²å®‰è£…æ ‡è®° | `text-green-600` | æˆåŠŸçŠ¶æ€ |
| æç¤ºåŒºåŸŸ | `bg-blue-50` | ä¿¡æ¯æç¤º |

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ä½¿ç”¨

```tsx
import { WalletConnector, useWalletConnector } from '@/components';

function MyPage() {
  const { isOpen, open, close, connect, connectedWallet } = useWalletConnector();

  return (
    <>
      <button onClick={open}>è¿æ¥é’±åŒ…</button>

      {connectedWallet && (
        <div>
          å·²è¿æ¥: {connectedWallet.id}
          åœ°å€: {connectedWallet.address}
        </div>
      )}

      <WalletConnector
        isOpen={isOpen}
        onClose={close}
        onConnect={connect}
      />
    </>
  );
}
```

### é«˜çº§ä½¿ç”¨

```tsx
import { useWalletConnector } from '@/components';
import { useEffect } from 'react';

function AdvancedExample() {
  const {
    isOpen,
    open,
    close,
    connect,
    disconnect,
    connectedWallet
  } = useWalletConnector();

  // ç›‘å¬é’±åŒ…è¿æ¥çŠ¶æ€
  useEffect(() => {
    if (connectedWallet) {
      console.log('Wallet connected:', connectedWallet);
      // æ‰§è¡Œè¿æ¥åçš„æ“ä½œ...
    }
  }, [connectedWallet]);

  // æ‰‹åŠ¨è¿æ¥ç‰¹å®šé’±åŒ…
  const connectMetaMask = async () => {
    try {
      await connect('metamask', 'evm');
      console.log('MetaMask connected!');
    } catch (error) {
      console.error('Connection failed:', error);
    }
  };

  return (
    <div>
      <button onClick={open}>æ‰“å¼€é’±åŒ…é€‰æ‹©å™¨</button>
      <button onClick={connectMetaMask}>ç›´æ¥è¿æ¥ MetaMask</button>
      {connectedWallet && (
        <button onClick={disconnect}>æ–­å¼€è¿æ¥</button>
      )}
    </div>
  );
}
```

---

## ğŸ“Š ç»„ä»¶ API

### `useWalletConnector` Hook

è¿”å›å€¼:

```typescript
{
  isOpen: boolean;                    // å¼¹çª—å¼€å…³çŠ¶æ€
  open: () => void;                   // æ‰“å¼€å¼¹çª—
  close: () => void;                  // å…³é—­å¼¹çª—
  connect: (walletId, type) => Promise<string>;  // è¿æ¥é’±åŒ…
  disconnect: () => void;             // æ–­å¼€è¿æ¥
  connectedWallet: {                  // å·²è¿æ¥é’±åŒ…ä¿¡æ¯
    id: string;
    type: 'polkadot' | 'evm';
    address?: string;
  } | null;
}
```

### `WalletConnector` ç»„ä»¶

Props:

```typescript
interface WalletConnectorProps {
  isOpen: boolean;                    // æ˜¯å¦æ˜¾ç¤º
  onClose: () => void;                // å…³é—­å›è°ƒ
  onConnect: (                        // è¿æ¥å›è°ƒ
    walletId: string,
    walletType: 'polkadot' | 'evm'
  ) => void;
}
```

---

## ğŸ¯ æ”¯æŒçš„é’±åŒ…

### Polkadot ç”Ÿæ€

| é’±åŒ… | ID | å›¾æ ‡ | ä¸‹è½½é“¾æ¥ |
|------|----|----- |----------|
| Talisman | `talisman` | âœ‹ | https://talisman.xyz/ |
| Polkadot.js | `polkadot-js` | ğŸŸ£ | https://polkadot.js.org/extension/ |
| SubWallet | `subwallet` | ğŸ’ | https://subwallet.app/ |

### EVM ç”Ÿæ€

| é’±åŒ… | ID | å›¾æ ‡ | ä¸‹è½½é“¾æ¥ |
|------|----|----- |----------|
| MetaMask | `metamask` | ğŸ¦Š | å†…ç½®æ£€æµ‹ |
| WalletConnect | `walletconnect` | ğŸ”— | æ— éœ€ä¸‹è½½ |
| OKX Wallet | `okx` | â¬› | https://www.okx.com/web3 |
| Gate Wallet | `gate` | ğŸ”· | https://www.gate.io/web3 |
| Enkrypt | `enkrypt` | ğŸ” | https://www.enkrypt.com/ |

---

## ğŸ” é’±åŒ…æ£€æµ‹é€»è¾‘

### Window å¯¹è±¡æ£€æµ‹

```typescript
// MetaMask
window.ethereum?.isMetaMask

// Talisman
window.talismanEth

// Polkadot.js
window.injectedWeb3?.['polkadot-js']

// SubWallet
window.injectedWeb3?.['subwallet-js']

// OKX Wallet
window.okxwallet

// Gate Wallet
window.gatewallet

// Enkrypt
window.enkrypt
```

### å®‰è£…çŠ¶æ€æ˜¾ç¤º

```tsx
{installed ? (
  <div className="text-xs text-green-600 font-medium">
    å·²å®‰è£…
  </div>
) : null}
```

---

## ğŸ¬ äº¤äº’æµç¨‹

### å·²å®‰è£…é’±åŒ…è¿æ¥æµç¨‹

```
1. ç”¨æˆ·ç‚¹å‡»é’±åŒ…å¡ç‰‡
   â†“
2. æ£€æµ‹é’±åŒ…å·²å®‰è£…
   â†“
3. è¯·æ±‚è¿æ¥æƒé™
   â†“
4. è·å–é’±åŒ…åœ°å€
   â†“
5. æ›´æ–°è¿æ¥çŠ¶æ€
   â†“
6. å…³é—­å¼¹çª—
```

### æœªå®‰è£…é’±åŒ…æµç¨‹

```
1. ç”¨æˆ·ç‚¹å‡»é’±åŒ…å¡ç‰‡
   â†“
2. æ£€æµ‹é’±åŒ…æœªå®‰è£…
   â†“
3. æ˜¾ç¤ºé’±åŒ…è¯¦æƒ…é¡µ
   â†“
4. å±•ç¤ºåŠŸèƒ½ç‰¹æ€§
   â†“
5. æä¾›ä¸‹è½½æŒ‰é’®
   â†“
6. ç”¨æˆ·ç‚¹å‡»ä¸‹è½½
   â†“
7. æ‰“å¼€å®˜ç½‘é“¾æ¥
```

---

## ğŸ¨ åŠ¨ç”»æ•ˆæœ

### å¼¹çª—åŠ¨ç”»

```typescript
// èƒŒæ™¯é®ç½©
initial={{ opacity: 0 }}
animate={{ opacity: 1 }}
exit={{ opacity: 0 }}

// å†…å®¹å¡ç‰‡
initial={{ scale: 0.95, opacity: 0 }}
animate={{ scale: 1, opacity: 1 }}
exit={{ scale: 0.95, opacity: 0 }}
```

### é¡µé¢åˆ‡æ¢åŠ¨ç”»

```typescript
// é’±åŒ…åˆ—è¡¨
initial={{ opacity: 0, x: -20 }}
animate={{ opacity: 1, x: 0 }}
exit={{ opacity: 0, x: 20 }}

// é’±åŒ…è¯¦æƒ…
initial={{ opacity: 0, x: 20 }}
animate={{ opacity: 1, x: 0 }}
exit={{ opacity: 0, x: -20 }}
```

### å¡ç‰‡æ‚¬åœ

```typescript
whileHover={{ scale: 1.02 }}
whileTap={{ scale: 0.98 }}
```

---

## ğŸ“± å“åº”å¼è®¾è®¡

### ç§»åŠ¨ç«¯ä¼˜åŒ–

- å¼¹çª—å®½åº¦: `max-w-md w-full`
- å¡ç‰‡å¸ƒå±€: å•åˆ—æ˜¾ç¤º
- è§¦æ‘¸å‹å¥½: å¤§æŒ‰é’®,æ¸…æ™°é—´è·
- æ»šåŠ¨ä¼˜åŒ–: `max-h-[400px] overflow-y-auto`

### æ¡Œé¢ç«¯

- å±…ä¸­æ˜¾ç¤º
- é€‚å½“é—´è·
- æ‚¬åœæ•ˆæœ
- é”®ç›˜å¯¼èˆªæ”¯æŒ

---

## ğŸ”’ å®‰å…¨è€ƒè™‘

### 1. æƒé™è¯·æ±‚

```typescript
// ä»…åœ¨ç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»æ—¶è¯·æ±‚æƒé™
await window.ethereum.request({
  method: 'eth_requestAccounts'
});
```

### 2. åœ°å€éªŒè¯

```typescript
// éªŒè¯è¿”å›çš„åœ°å€æ ¼å¼
if (!/^0x[a-fA-F0-9]{40}$/.test(address)) {
  throw new Error('Invalid address format');
}
```

### 3. é”™è¯¯å¤„ç†

```typescript
try {
  await connect(walletId, walletType);
} catch (error) {
  console.error('Connection failed:', error);
  // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
}
```

---

## ğŸ¯ å®æˆ˜æ¡ˆä¾‹

### æ¡ˆä¾‹ 1: è´¨æŠ¼é¡µé¢

```tsx
function StakingPage() {
  const { open, connectedWallet } = useWalletConnector();

  if (!connectedWallet) {
    return (
      <div className="text-center">
        <p>è¯·å…ˆè¿æ¥é’±åŒ…</p>
        <button onClick={open}>è¿æ¥é’±åŒ…</button>
      </div>
    );
  }

  return (
    <StakingInterface wallet={connectedWallet} />
  );
}
```

### æ¡ˆä¾‹ 2: å¯¼èˆªæ 

```tsx
function Navbar() {
  const { open, disconnect, connectedWallet } = useWalletConnector();

  return (
    <nav>
      {!connectedWallet ? (
        <button onClick={open}>è¿æ¥é’±åŒ…</button>
      ) : (
        <div>
          {formatAddress(connectedWallet.address)}
          <button onClick={disconnect}>æ–­å¼€</button>
        </div>
      )}
    </nav>
  );
}
```

### æ¡ˆä¾‹ 3: ç½‘ç»œåˆ‡æ¢

```tsx
function NetworkSwitcher() {
  const { connectedWallet, disconnect } = useWalletConnector();

  const switchNetwork = async (chainId: string) => {
    if (connectedWallet?.type === 'evm') {
      await window.ethereum.request({
        method: 'wallet_switchEthereumChain',
        params: [{ chainId }],
      });
    }
  };

  return (
    <select onChange={(e) => switchNetwork(e.target.value)}>
      <option value="0x1">Ethereum</option>
      <option value="0x89">Polygon</option>
    </select>
  );
}
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. æ‡’åŠ è½½é’±åŒ…åº“

```typescript
// ä»…åœ¨éœ€è¦æ—¶åŠ è½½é’±åŒ… SDK
const loadWalletSDK = async (walletId: string) => {
  switch (walletId) {
    case 'walletconnect':
      return await import('@walletconnect/ethereum-provider');
    // ...å…¶ä»–é’±åŒ…
  }
};
```

### 2. ç¼“å­˜è¿æ¥çŠ¶æ€

```typescript
// ä½¿ç”¨ localStorage ç¼“å­˜ä¸Šæ¬¡è¿æ¥çš„é’±åŒ…
useEffect(() => {
  const lastWallet = localStorage.getItem('lastConnectedWallet');
  if (lastWallet) {
    // å°è¯•è‡ªåŠ¨é‡è¿
    reconnect(lastWallet);
  }
}, []);
```

### 3. é˜²æŠ–å¤„ç†

```typescript
// é˜²æ­¢é‡å¤ç‚¹å‡»
const [connecting, setConnecting] = useState(false);

const handleConnect = async () => {
  if (connecting) return;
  setConnecting(true);
  try {
    await connect(walletId, walletType);
  } finally {
    setConnecting(false);
  }
};
```

---

## ğŸ§ª æµ‹è¯•è®¿é—®

### æ¼”ç¤ºé¡µé¢
```
http://localhost:3002/demo/wallet
```

### åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] Polkadot æ ‡ç­¾åˆ‡æ¢
- [ ] EVM æ ‡ç­¾åˆ‡æ¢
- [ ] å·²å®‰è£…é’±åŒ…æ˜¾ç¤º
- [ ] æœªå®‰è£…é’±åŒ…ä¸‹è½½æç¤º
- [ ] é’±åŒ…è¯¦æƒ…é¡µå±•ç¤º
- [ ] è¿æ¥æˆåŠŸçŠ¶æ€
- [ ] æ–­å¼€è¿æ¥åŠŸèƒ½
- [ ] åœ°å€å¤åˆ¶åŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯å“åº”å¼
- [ ] åŠ¨ç”»æµç•…æ€§

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç¬¬ä¸€é˜¶æ®µå®Œæˆæ€»ç»“](../ç¬¬ä¸€é˜¶æ®µå®Œæˆæ€»ç»“.md)
- [è½¬ç›˜ä¼˜åŒ–å®ŒæˆæŠ¥å‘Š](../è½¬ç›˜ä¼˜åŒ–å®ŒæˆæŠ¥å‘Š.md)
- [ç»„ä»¶ä½¿ç”¨é€ŸæŸ¥è¡¨](../ç»„ä»¶ä½¿ç”¨é€ŸæŸ¥è¡¨.md)

---

## ğŸ‰ æ€»ç»“

å¤šé’±åŒ…è¿æ¥ç³»ç»Ÿå·²å®Œæˆ:

âœ… **8ä¸ªä¸»æµé’±åŒ…** - è¦†ç›– Polkadot å’Œ EVM ç”Ÿæ€
âœ… **æ™ºèƒ½æ£€æµ‹** - è‡ªåŠ¨è¯†åˆ«å·²å®‰è£…é’±åŒ…
âœ… **ä¼˜é›…é™çº§** - æœªå®‰è£…é’±åŒ…æä¾›ä¸‹è½½å¼•å¯¼
âœ… **æµç•…åŠ¨ç”»** - Framer Motion åŠ æŒ
âœ… **ç±»å‹å®‰å…¨** - TypeScript å…¨è¦†ç›–
âœ… **å¼€ç®±å³ç”¨** - ç®€å•çš„ Hook API

**çŠ¶æ€:** âœ… ç”Ÿäº§å°±ç»ª

è®¿é—®æ¼”ç¤º: http://localhost:3002/demo/wallet
